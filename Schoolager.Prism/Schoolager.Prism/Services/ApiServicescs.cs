using System;
using System.Collections.Generic;
using System.Net;
using System.Net.Http;
using System.Net.Http.Headers;
using System.Text;
using System.Threading.Tasks;

using Newtonsoft.Json;
using Schoolager.Prism.Models;
using Xamarin.Essentials;

namespace Schoolager.Prism.Services
{
    public class ApiServicescs : IApiServices
    {
 
        public async Task<Response>GetListAsync<T>(
           string urlBase,
           string servicePrefix,
           string controller)
        {
            try
            {
                var client = new HttpClient
                {
                    BaseAddress = new Uri($"{urlBase}"),
                };

                var url = $"{servicePrefix}{controller}";


               // var response = await httpClient.GetAsync($"https://api.openweathermap.org/data/2.5/forecast?id=524901&appid=e9b98b4b8e7b477116d5163477065289");
               
               var response = await client.GetAsync(url);
                //var response = await client.GetAsync(url);
                // var response = await client.GetAsync(url);
                var result = await response.Content.ReadAsStringAsync();
                /*
                if (!response.IsSuccessStatusCode)
                {
                    return new Response
                    {
                        IsSuccess = false,
                        Message = result,
                    };
                }
                else
                {*/

                    string jsonString =
@"[
    {
        ""id"": 1,
        ""subjectName"": ""Ciências"",
        ""room"": null,
        ""roomId"": 4,
        ""weekDay"": 1,
        ""startTime"": ""2022-12-12T08:00:00"",
        ""endTime"": ""2022-12-12T08:45:00"",
        ""recurrenceRule"": ""FREQ=WEEKLY;INTERVAL=1;UNTIL=20231201T190801Z;"",
        ""recurrenceException"": ""20220101T000000Z,20220425T000000Z,20220501T000000Z,20220610T000000Z,20220815T000000Z,20221005T000000Z,20221101T000000Z,20221201T000000Z,20221208T000000Z,20221225T000000Z,20230101T000000Z,20230425T000000Z,20230501T000000Z,20230610T000000Z,20230815T000000Z,20231005T000000Z,20231101T000000Z,20231201T000000Z,20231208T000000Z,20231225T000000Z,20240101T000000Z,20240425T000000Z,20240501T000000Z,20240610T000000Z,20240815T000000Z,20241005T000000Z,20241101T000000Z,20241201T000000Z,20241208T000000Z,20241225T000000Z,20250101T000000Z,20250425T000000Z,20250501T000000Z,20250610T000000Z,20250815T000000Z,20251005T000000Z,20251101T000000Z,20251201T000000Z,20251208T000000Z,20251225T000000Z,20260101T000000Z,20260425T000000Z,20260501T000000Z,20260610T000000Z,20260815T000000Z,20261005T000000Z,20261101T000000Z,20261201T000000Z,20261208T000000Z,20261225T000000Z,20270101T000000Z,20270425T000000Z,20270501T000000Z,20270610T000000Z,20270815T000000Z,20271005T000000Z,20271101T000000Z,20271201T000000Z,20271208T000000Z,20271225T000000Z,20280101T000000Z,20280425T000000Z,20280501T000000Z,20280610T000000Z,20280815T000000Z,20281005T000000Z,20281101T000000Z,20281201T000000Z,20281208T000000Z,20281225T000000Z,20290101T000000Z,20290425T000000Z,20290501T000000Z,20290610T000000Z,20290815T000000Z,20291005T000000Z,20291101T000000Z,20291201T000000Z,20291208T000000Z,20291225T000000Z,20300101T000000Z,20300425T000000Z,20300501T000000Z,20300610T000000Z,20300815T000000Z,20301005T000000Z,20301101T000000Z,20301201T000000Z,20301208T000000Z,20301225T000000Z,20310101T000000Z,20310425T000000Z,20310501T000000Z,20310610T000000Z,20310815T000000Z,20311005T000000Z,20311101T000000Z,20311201T000000Z,20311208T000000Z,20311225T000000Z,20320101T000000Z,20320425T000000Z,20320501T000000Z,20320610T000000Z,20320815T000000Z,20321005T000000Z,20321101T000000Z,20321201T000000Z,20321208T000000Z,20321225T000000Z,20330101T000000Z,20330425T000000Z,20330501T000000Z,20330610T000000Z,20330815T000000Z,20331005T000000Z,20331101T000000Z,20331201T000000Z,20331208T000000Z,20331225T000000Z,20340101T000000Z,20340425T000000Z,20340501T000000Z,20340610T000000Z,20340815T000000Z,20341005T000000Z,20341101T000000Z,20341201T000000Z,20341208T000000Z,20341225T000000Z,20350101T000000Z,20350425T000000Z,20350501T000000Z,20350610T000000Z,20350815T000000Z,20351005T000000Z,20351101T000000Z,20351201T000000Z,20351208T000000Z,20351225T000000Z,20360101T000000Z,20360425T000000Z,20360501T000000Z,20360610T000000Z,20360815T000000Z,20361005T000000Z,20361101T000000Z,20361201T000000Z,20361208T000000Z,20361225T000000Z,20370101T000000Z,20370425T000000Z,20370501T000000Z,20370610T000000Z,20370815T000000Z,20371005T000000Z,20371101T000000Z,20371201T000000Z,20371208T000000Z,20371225T000000Z,20380101T000000Z,20380425T000000Z,20380501T000000Z,20380610T000000Z,20380815T000000Z,20381005T000000Z,20381101T000000Z,20381201T000000Z,20381208T000000Z,20381225T000000Z,20390101T000000Z,20390425T000000Z,20390501T000000Z,20390610T000000Z,20390815T000000Z,20391005T000000Z,20391101T000000Z,20391201T000000Z,20391208T000000Z,20391225T000000Z,20400101T000000Z,20400425T000000Z,20400501T000000Z,20400610T000000Z,20400815T000000Z,20401005T000000Z,20401101T000000Z,20401201T000000Z,20401208T000000Z,20401225T000000Z,20410101T000000Z,20410425T000000Z,20410501T000000Z,20410610T000000Z,20410815T000000Z,20411005T000000Z,20411101T000000Z,20411201T000000Z,20411208T000000Z,20411225T000000Z,20420101T000000Z,20420425T000000Z,20420501T000000Z,20420610T000000Z,20420815T000000Z,20421005T000000Z,20421101T000000Z,20421201T000000Z,20421208T000000Z,20421225T000000Z,20430101T000000Z,20430425T000000Z,20430501T000000Z,20430610T000000Z,20430815T000000Z,20431005T000000Z,20431101T000000Z,20431201T000000Z,20431208T000000Z,20431225T000000Z,20440101T000000Z,20440425T000000Z,20440501T000000Z,20440610T000000Z,20440815T000000Z,20441005T000000Z,20441101T000000Z,20441201T000000Z,20441208T000000Z,20441225T000000Z,20450101T000000Z,20450425T000000Z,20450501T000000Z,20450610T000000Z,20450815T000000Z,20451005T000000Z,20451101T000000Z,20451201T000000Z,20451208T000000Z,20451225T000000Z,20460101T000000Z,20460425T000000Z,20460501T000000Z,20460610T000000Z,20460815T000000Z,20461005T000000Z,20461101T000000Z,20461201T000000Z,20461208T000000Z,20461225T000000Z,20470101T000000Z,20470425T000000Z,20470501T000000Z,20470610T000000Z,20470815T000000Z,20471005T000000Z,20471101T000000Z,20471201T000000Z,20471208T000000Z,20471225T000000Z,20480101T000000Z,20480425T000000Z,20480501T000000Z,20480610T000000Z,20480815T000000Z,20481005T000000Z,20481101T000000Z,20481201T000000Z,20481208T000000Z,20481225T000000Z,20490101T000000Z,20490425T000000Z,20490501T000000Z,20490610T000000Z,20490815T000000Z,20491005T000000Z,20491101T000000Z,20491201T000000Z,20491208T000000Z,20491225T000000Z"",
        ""subject"": null,
        ""subjectId"": 9,
        ""teacher"": null,
        ""teacherId"": 19,
        ""turma"": null,
        ""turmaId"": 1,
        ""lessonDatas"": null
    },
    {
        ""id"": 2,
        ""subjectName"": ""Físico-Química"",
        ""room"": null,
        ""roomId"": 3,
        ""weekDay"": 3,
        ""startTime"": ""2022-12-11T09:00:00"",
        ""endTime"": ""2022-12-11T09:45:00"",
        ""recurrenceRule"": ""FREQ=WEEKLY;INTERVAL=1;UNTIL=20231201T190801Z;"",
        ""recurrenceException"": ""20220101T000000Z,20220425T000000Z,20220501T000000Z,20220610T000000Z,20220815T000000Z,20221005T000000Z,20221101T000000Z,20221201T000000Z,20221208T000000Z,20221225T000000Z,20230101T000000Z,20230425T000000Z,20230501T000000Z,20230610T000000Z,20230815T000000Z,20231005T000000Z,20231101T000000Z,20231201T000000Z,20231208T000000Z,20231225T000000Z,20240101T000000Z,20240425T000000Z,20240501T000000Z,20240610T000000Z,20240815T000000Z,20241005T000000Z,20241101T000000Z,20241201T000000Z,20241208T000000Z,20241225T000000Z,20250101T000000Z,20250425T000000Z,20250501T000000Z,20250610T000000Z,20250815T000000Z,20251005T000000Z,20251101T000000Z,20251201T000000Z,20251208T000000Z,20251225T000000Z,20260101T000000Z,20260425T000000Z,20260501T000000Z,20260610T000000Z,20260815T000000Z,20261005T000000Z,20261101T000000Z,20261201T000000Z,20261208T000000Z,20261225T000000Z,20270101T000000Z,20270425T000000Z,20270501T000000Z,20270610T000000Z,20270815T000000Z,20271005T000000Z,20271101T000000Z,20271201T000000Z,20271208T000000Z,20271225T000000Z,20280101T000000Z,20280425T000000Z,20280501T000000Z,20280610T000000Z,20280815T000000Z,20281005T000000Z,20281101T000000Z,20281201T000000Z,20281208T000000Z,20281225T000000Z,20290101T000000Z,20290425T000000Z,20290501T000000Z,20290610T000000Z,20290815T000000Z,20291005T000000Z,20291101T000000Z,20291201T000000Z,20291208T000000Z,20291225T000000Z,20300101T000000Z,20300425T000000Z,20300501T000000Z,20300610T000000Z,20300815T000000Z,20301005T000000Z,20301101T000000Z,20301201T000000Z,20301208T000000Z,20301225T000000Z,20310101T000000Z,20310425T000000Z,20310501T000000Z,20310610T000000Z,20310815T000000Z,20311005T000000Z,20311101T000000Z,20311201T000000Z,20311208T000000Z,20311225T000000Z,20320101T000000Z,20320425T000000Z,20320501T000000Z,20320610T000000Z,20320815T000000Z,20321005T000000Z,20321101T000000Z,20321201T000000Z,20321208T000000Z,20321225T000000Z,20330101T000000Z,20330425T000000Z,20330501T000000Z,20330610T000000Z,20330815T000000Z,20331005T000000Z,20331101T000000Z,20331201T000000Z,20331208T000000Z,20331225T000000Z,20340101T000000Z,20340425T000000Z,20340501T000000Z,20340610T000000Z,20340815T000000Z,20341005T000000Z,20341101T000000Z,20341201T000000Z,20341208T000000Z,20341225T000000Z,20350101T000000Z,20350425T000000Z,20350501T000000Z,20350610T000000Z,20350815T000000Z,20351005T000000Z,20351101T000000Z,20351201T000000Z,20351208T000000Z,20351225T000000Z,20360101T000000Z,20360425T000000Z,20360501T000000Z,20360610T000000Z,20360815T000000Z,20361005T000000Z,20361101T000000Z,20361201T000000Z,20361208T000000Z,20361225T000000Z,20370101T000000Z,20370425T000000Z,20370501T000000Z,20370610T000000Z,20370815T000000Z,20371005T000000Z,20371101T000000Z,20371201T000000Z,20371208T000000Z,20371225T000000Z,20380101T000000Z,20380425T000000Z,20380501T000000Z,20380610T000000Z,20380815T000000Z,20381005T000000Z,20381101T000000Z,20381201T000000Z,20381208T000000Z,20381225T000000Z,20390101T000000Z,20390425T000000Z,20390501T000000Z,20390610T000000Z,20390815T000000Z,20391005T000000Z,20391101T000000Z,20391201T000000Z,20391208T000000Z,20391225T000000Z,20400101T000000Z,20400425T000000Z,20400501T000000Z,20400610T000000Z,20400815T000000Z,20401005T000000Z,20401101T000000Z,20401201T000000Z,20401208T000000Z,20401225T000000Z,20410101T000000Z,20410425T000000Z,20410501T000000Z,20410610T000000Z,20410815T000000Z,20411005T000000Z,20411101T000000Z,20411201T000000Z,20411208T000000Z,20411225T000000Z,20420101T000000Z,20420425T000000Z,20420501T000000Z,20420610T000000Z,20420815T000000Z,20421005T000000Z,20421101T000000Z,20421201T000000Z,20421208T000000Z,20421225T000000Z,20430101T000000Z,20430425T000000Z,20430501T000000Z,20430610T000000Z,20430815T000000Z,20431005T000000Z,20431101T000000Z,20431201T000000Z,20431208T000000Z,20431225T000000Z,20440101T000000Z,20440425T000000Z,20440501T000000Z,20440610T000000Z,20440815T000000Z,20441005T000000Z,20441101T000000Z,20441201T000000Z,20441208T000000Z,20441225T000000Z,20450101T000000Z,20450425T000000Z,20450501T000000Z,20450610T000000Z,20450815T000000Z,20451005T000000Z,20451101T000000Z,20451201T000000Z,20451208T000000Z,20451225T000000Z,20460101T000000Z,20460425T000000Z,20460501T000000Z,20460610T000000Z,20460815T000000Z,20461005T000000Z,20461101T000000Z,20461201T000000Z,20461208T000000Z,20461225T000000Z,20470101T000000Z,20470425T000000Z,20470501T000000Z,20470610T000000Z,20470815T000000Z,20471005T000000Z,20471101T000000Z,20471201T000000Z,20471208T000000Z,20471225T000000Z,20480101T000000Z,20480425T000000Z,20480501T000000Z,20480610T000000Z,20480815T000000Z,20481005T000000Z,20481101T000000Z,20481201T000000Z,20481208T000000Z,20481225T000000Z,20490101T000000Z,20490425T000000Z,20490501T000000Z,20490610T000000Z,20490815T000000Z,20491005T000000Z,20491101T000000Z,20491201T000000Z,20491208T000000Z,20491225T000000Z"",
        ""subject"": null,
        ""subjectId"": 10,
        ""teacher"": null,
        ""teacherId"": 20,
        ""turma"": null,
        ""turmaId"": 1,
        ""lessonDatas"": null
    },
    {
        ""id"": 3,
        ""subjectName"": ""Inglês"",
        ""room"": null,
        ""roomId"": 4,
        ""weekDay"": 3,
        ""startTime"": ""2022-12-10T12:00:00"",
        ""endTime"": ""2022-12-10T13:30:00"",
        ""recurrenceRule"": ""FREQ=WEEKLY;INTERVAL=1;UNTIL=20231201T190801Z;"",
        ""recurrenceException"": ""20220101T000000Z,20220425T000000Z,20220501T000000Z,20220610T000000Z,20220815T000000Z,20221005T000000Z,20221101T000000Z,20221201T000000Z,20221208T000000Z,20221225T000000Z,20230101T000000Z,20230425T000000Z,20230501T000000Z,20230610T000000Z,20230815T000000Z,20231005T000000Z,20231101T000000Z,20231201T000000Z,20231208T000000Z,20231225T000000Z,20240101T000000Z,20240425T000000Z,20240501T000000Z,20240610T000000Z,20240815T000000Z,20241005T000000Z,20241101T000000Z,20241201T000000Z,20241208T000000Z,20241225T000000Z,20250101T000000Z,20250425T000000Z,20250501T000000Z,20250610T000000Z,20250815T000000Z,20251005T000000Z,20251101T000000Z,20251201T000000Z,20251208T000000Z,20251225T000000Z,20260101T000000Z,20260425T000000Z,20260501T000000Z,20260610T000000Z,20260815T000000Z,20261005T000000Z,20261101T000000Z,20261201T000000Z,20261208T000000Z,20261225T000000Z,20270101T000000Z,20270425T000000Z,20270501T000000Z,20270610T000000Z,20270815T000000Z,20271005T000000Z,20271101T000000Z,20271201T000000Z,20271208T000000Z,20271225T000000Z,20280101T000000Z,20280425T000000Z,20280501T000000Z,20280610T000000Z,20280815T000000Z,20281005T000000Z,20281101T000000Z,20281201T000000Z,20281208T000000Z,20281225T000000Z,20290101T000000Z,20290425T000000Z,20290501T000000Z,20290610T000000Z,20290815T000000Z,20291005T000000Z,20291101T000000Z,20291201T000000Z,20291208T000000Z,20291225T000000Z,20300101T000000Z,20300425T000000Z,20300501T000000Z,20300610T000000Z,20300815T000000Z,20301005T000000Z,20301101T000000Z,20301201T000000Z,20301208T000000Z,20301225T000000Z,20310101T000000Z,20310425T000000Z,20310501T000000Z,20310610T000000Z,20310815T000000Z,20311005T000000Z,20311101T000000Z,20311201T000000Z,20311208T000000Z,20311225T000000Z,20320101T000000Z,20320425T000000Z,20320501T000000Z,20320610T000000Z,20320815T000000Z,20321005T000000Z,20321101T000000Z,20321201T000000Z,20321208T000000Z,20321225T000000Z,20330101T000000Z,20330425T000000Z,20330501T000000Z,20330610T000000Z,20330815T000000Z,20331005T000000Z,20331101T000000Z,20331201T000000Z,20331208T000000Z,20331225T000000Z,20340101T000000Z,20340425T000000Z,20340501T000000Z,20340610T000000Z,20340815T000000Z,20341005T000000Z,20341101T000000Z,20341201T000000Z,20341208T000000Z,20341225T000000Z,20350101T000000Z,20350425T000000Z,20350501T000000Z,20350610T000000Z,20350815T000000Z,20351005T000000Z,20351101T000000Z,20351201T000000Z,20351208T000000Z,20351225T000000Z,20360101T000000Z,20360425T000000Z,20360501T000000Z,20360610T000000Z,20360815T000000Z,20361005T000000Z,20361101T000000Z,20361201T000000Z,20361208T000000Z,20361225T000000Z,20370101T000000Z,20370425T000000Z,20370501T000000Z,20370610T000000Z,20370815T000000Z,20371005T000000Z,20371101T000000Z,20371201T000000Z,20371208T000000Z,20371225T000000Z,20380101T000000Z,20380425T000000Z,20380501T000000Z,20380610T000000Z,20380815T000000Z,20381005T000000Z,20381101T000000Z,20381201T000000Z,20381208T000000Z,20381225T000000Z,20390101T000000Z,20390425T000000Z,20390501T000000Z,20390610T000000Z,20390815T000000Z,20391005T000000Z,20391101T000000Z,20391201T000000Z,20391208T000000Z,20391225T000000Z,20400101T000000Z,20400425T000000Z,20400501T000000Z,20400610T000000Z,20400815T000000Z,20401005T000000Z,20401101T000000Z,20401201T000000Z,20401208T000000Z,20401225T000000Z,20410101T000000Z,20410425T000000Z,20410501T000000Z,20410610T000000Z,20410815T000000Z,20411005T000000Z,20411101T000000Z,20411201T000000Z,20411208T000000Z,20411225T000000Z,20420101T000000Z,20420425T000000Z,20420501T000000Z,20420610T000000Z,20420815T000000Z,20421005T000000Z,20421101T000000Z,20421201T000000Z,20421208T000000Z,20421225T000000Z,20430101T000000Z,20430425T000000Z,20430501T000000Z,20430610T000000Z,20430815T000000Z,20431005T000000Z,20431101T000000Z,20431201T000000Z,20431208T000000Z,20431225T000000Z,20440101T000000Z,20440425T000000Z,20440501T000000Z,20440610T000000Z,20440815T000000Z,20441005T000000Z,20441101T000000Z,20441201T000000Z,20441208T000000Z,20441225T000000Z,20450101T000000Z,20450425T000000Z,20450501T000000Z,20450610T000000Z,20450815T000000Z,20451005T000000Z,20451101T000000Z,20451201T000000Z,20451208T000000Z,20451225T000000Z,20460101T000000Z,20460425T000000Z,20460501T000000Z,20460610T000000Z,20460815T000000Z,20461005T000000Z,20461101T000000Z,20461201T000000Z,20461208T000000Z,20461225T000000Z,20470101T000000Z,20470425T000000Z,20470501T000000Z,20470610T000000Z,20470815T000000Z,20471005T000000Z,20471101T000000Z,20471201T000000Z,20471208T000000Z,20471225T000000Z,20480101T000000Z,20480425T000000Z,20480501T000000Z,20480610T000000Z,20480815T000000Z,20481005T000000Z,20481101T000000Z,20481201T000000Z,20481208T000000Z,20481225T000000Z,20490101T000000Z,20490425T000000Z,20490501T000000Z,20490610T000000Z,20490815T000000Z,20491005T000000Z,20491101T000000Z,20491201T000000Z,20491208T000000Z,20491225T000000Z"",
        ""subject"": null,
        ""subjectId"": 4,
        ""teacher"": null,
        ""teacherId"": 4,
        ""turma"": null,
        ""turmaId"": 1,
        ""lessonDatas"": null
    },
    {
        ""id"": 4,
        ""subjectName"": ""Inglês"",
        ""room"": null,
        ""roomId"": 5,
        ""weekDay"": 5,
        ""startTime"": ""2022-12-11T08:00:00"",
        ""endTime"": ""2022-12-11T08:45:00"",
        ""recurrenceRule"": ""FREQ=WEEKLY;INTERVAL=1;UNTIL=20231201T190801Z;"",
        ""recurrenceException"": ""20220101T000000Z,20220425T000000Z,20220501T000000Z,20220610T000000Z,20220815T000000Z,20221005T000000Z,20221101T000000Z,20221201T000000Z,20221208T000000Z,20221225T000000Z,20230101T000000Z,20230425T000000Z,20230501T000000Z,20230610T000000Z,20230815T000000Z,20231005T000000Z,20231101T000000Z,20231201T000000Z,20231208T000000Z,20231225T000000Z,20240101T000000Z,20240425T000000Z,20240501T000000Z,20240610T000000Z,20240815T000000Z,20241005T000000Z,20241101T000000Z,20241201T000000Z,20241208T000000Z,20241225T000000Z,20250101T000000Z,20250425T000000Z,20250501T000000Z,20250610T000000Z,20250815T000000Z,20251005T000000Z,20251101T000000Z,20251201T000000Z,20251208T000000Z,20251225T000000Z,20260101T000000Z,20260425T000000Z,20260501T000000Z,20260610T000000Z,20260815T000000Z,20261005T000000Z,20261101T000000Z,20261201T000000Z,20261208T000000Z,20261225T000000Z,20270101T000000Z,20270425T000000Z,20270501T000000Z,20270610T000000Z,20270815T000000Z,20271005T000000Z,20271101T000000Z,20271201T000000Z,20271208T000000Z,20271225T000000Z,20280101T000000Z,20280425T000000Z,20280501T000000Z,20280610T000000Z,20280815T000000Z,20281005T000000Z,20281101T000000Z,20281201T000000Z,20281208T000000Z,20281225T000000Z,20290101T000000Z,20290425T000000Z,20290501T000000Z,20290610T000000Z,20290815T000000Z,20291005T000000Z,20291101T000000Z,20291201T000000Z,20291208T000000Z,20291225T000000Z,20300101T000000Z,20300425T000000Z,20300501T000000Z,20300610T000000Z,20300815T000000Z,20301005T000000Z,20301101T000000Z,20301201T000000Z,20301208T000000Z,20301225T000000Z,20310101T000000Z,20310425T000000Z,20310501T000000Z,20310610T000000Z,20310815T000000Z,20311005T000000Z,20311101T000000Z,20311201T000000Z,20311208T000000Z,20311225T000000Z,20320101T000000Z,20320425T000000Z,20320501T000000Z,20320610T000000Z,20320815T000000Z,20321005T000000Z,20321101T000000Z,20321201T000000Z,20321208T000000Z,20321225T000000Z,20330101T000000Z,20330425T000000Z,20330501T000000Z,20330610T000000Z,20330815T000000Z,20331005T000000Z,20331101T000000Z,20331201T000000Z,20331208T000000Z,20331225T000000Z,20340101T000000Z,20340425T000000Z,20340501T000000Z,20340610T000000Z,20340815T000000Z,20341005T000000Z,20341101T000000Z,20341201T000000Z,20341208T000000Z,20341225T000000Z,20350101T000000Z,20350425T000000Z,20350501T000000Z,20350610T000000Z,20350815T000000Z,20351005T000000Z,20351101T000000Z,20351201T000000Z,20351208T000000Z,20351225T000000Z,20360101T000000Z,20360425T000000Z,20360501T000000Z,20360610T000000Z,20360815T000000Z,20361005T000000Z,20361101T000000Z,20361201T000000Z,20361208T000000Z,20361225T000000Z,20370101T000000Z,20370425T000000Z,20370501T000000Z,20370610T000000Z,20370815T000000Z,20371005T000000Z,20371101T000000Z,20371201T000000Z,20371208T000000Z,20371225T000000Z,20380101T000000Z,20380425T000000Z,20380501T000000Z,20380610T000000Z,20380815T000000Z,20381005T000000Z,20381101T000000Z,20381201T000000Z,20381208T000000Z,20381225T000000Z,20390101T000000Z,20390425T000000Z,20390501T000000Z,20390610T000000Z,20390815T000000Z,20391005T000000Z,20391101T000000Z,20391201T000000Z,20391208T000000Z,20391225T000000Z,20400101T000000Z,20400425T000000Z,20400501T000000Z,20400610T000000Z,20400815T000000Z,20401005T000000Z,20401101T000000Z,20401201T000000Z,20401208T000000Z,20401225T000000Z,20410101T000000Z,20410425T000000Z,20410501T000000Z,20410610T000000Z,20410815T000000Z,20411005T000000Z,20411101T000000Z,20411201T000000Z,20411208T000000Z,20411225T000000Z,20420101T000000Z,20420425T000000Z,20420501T000000Z,20420610T000000Z,20420815T000000Z,20421005T000000Z,20421101T000000Z,20421201T000000Z,20421208T000000Z,20421225T000000Z,20430101T000000Z,20430425T000000Z,20430501T000000Z,20430610T000000Z,20430815T000000Z,20431005T000000Z,20431101T000000Z,20431201T000000Z,20431208T000000Z,20431225T000000Z,20440101T000000Z,20440425T000000Z,20440501T000000Z,20440610T000000Z,20440815T000000Z,20441005T000000Z,20441101T000000Z,20441201T000000Z,20441208T000000Z,20441225T000000Z,20450101T000000Z,20450425T000000Z,20450501T000000Z,20450610T000000Z,20450815T000000Z,20451005T000000Z,20451101T000000Z,20451201T000000Z,20451208T000000Z,20451225T000000Z,20460101T000000Z,20460425T000000Z,20460501T000000Z,20460610T000000Z,20460815T000000Z,20461005T000000Z,20461101T000000Z,20461201T000000Z,20461208T000000Z,20461225T000000Z,20470101T000000Z,20470425T000000Z,20470501T000000Z,20470610T000000Z,20470815T000000Z,20471005T000000Z,20471101T000000Z,20471201T000000Z,20471208T000000Z,20471225T000000Z,20480101T000000Z,20480425T000000Z,20480501T000000Z,20480610T000000Z,20480815T000000Z,20481005T000000Z,20481101T000000Z,20481201T000000Z,20481208T000000Z,20481225T000000Z,20490101T000000Z,20490425T000000Z,20490501T000000Z,20490610T000000Z,20490815T000000Z,20491005T000000Z,20491101T000000Z,20491201T000000Z,20491208T000000Z,20491225T000000Z"",
        ""subject"": null,
        ""subjectId"": 4,
        ""teacher"": null,
        ""teacherId"": 4,
        ""turma"": null,
        ""turmaId"": 1,
        ""lessonDatas"": null
    }
]
";

               
              /*  if (result.Equals(jsonString))
                {

                }*/
                    
                    var list = JsonConvert.DeserializeObject<List<T>>(result);
                   // var list = JsonConvert.DeserializeObject<List<T>>(result);
                    return new Response
                    {
                        IsSuccess = true,
                        Result = list
                    };
               // }
            }
            catch (Exception ex)
            {
                return new Response
                {
                    IsSuccess = false,
                    Message = ex.Message
                };
            }
        }
        public async Task<Response> Login(
          string urlBase,
          string servicePrefix,
          string controller,
          string email,
          string password)
        {
            try
            {
                string requestString = JsonConvert.SerializeObject(email);
                StringContent content = new StringContent(requestString, Encoding.UTF8, "application/json");
                /* HttpClient client = new HttpClient
                  {
                      BaseAddress = new Uri(urlBase)
                  };

                  string url = $"{servicePrefix}{controller}";
                  HttpResponseMessage response = await client.GetAsync(url);*/

                HttpClient httpClient = new HttpClient();
                var response =await  httpClient.PostAsync($"https://schoolager.azurewebsites.net/Api/Users/GetUserByEmail?email={email}&password={password}", content);
               // var response = await httpClient.PostAsync($"https://schoolager.azurewebsites.net/Api/Users/GetUserByEmail", content);
                var result = await response.Content.ReadAsStringAsync();

                if (!response.IsSuccessStatusCode || result =="")
                {
                    return new Response
                    {
                        IsSuccess = false,
                        Message = result,
                    };
                }
    
                UserResponse userResponse = JsonConvert.DeserializeObject<UserResponse>(result);

                return new Response
                {
                    IsSuccess = true,
                    Result = userResponse
                };
            }
            catch (Exception ex)
            {
                return new Response
                {
                    IsSuccess = false,
                    Message = ex.Message
                };
            }
        }
    }
}